{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/CreatePostModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef } from \"react\";\nimport { XMarkIcon, PhotoIcon } from \"@heroicons/react/24/outline\";\nimport { collection, addDoc, serverTimestamp } from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { db, storage } from \"@/lib/firebase-init\";\nimport { useAuth } from \"@/lib/AuthContext\";\n\ninterface CreatePostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onPostCreated: () => void;\n}\n\nexport default function CreatePostModal({\n  isOpen,\n  onClose,\n  onPostCreated,\n}: CreatePostModalProps) {\n  const { user } = useAuth();\n  const [content, setContent] = useState(\"\");\n  const [selectedImage, setSelectedImage] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith(\"image/\")) {\n      setError(\"Por favor, selecione apenas arquivos de imagem.\");\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      setError(\"A imagem deve ter no máximo 5MB.\");\n      return;\n    }\n\n    setSelectedImage(file);\n    setError(\"\");\n\n    // Create preview\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setImagePreview(reader.result as string);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    if (!content.trim() && !selectedImage) {\n      setError(\"Adicione um texto ou uma imagem para criar a publicação.\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      let imageUrl = null;\n\n      // Upload image if selected\n      if (selectedImage) {\n        const imageRef = ref(storage, `posts/${Date.now()}-${selectedImage.name}`);\n        await uploadBytes(imageRef, selectedImage);\n        imageUrl = await getDownloadURL(imageRef);\n      }\n\n      // Create post document\n      await addDoc(collection(db, \"posts\"), {\n        authorId: user.uid,\n        author: user.displayName || \"Usuário\",\n        authorAvatar: user.photoURL || \"/default-avatar.png\",\n        content: content.trim(),\n        imageUrl,\n        likes: 0,\n        likedBy: [],\n        comments: [],\n        timestamp: serverTimestamp(),\n      });\n\n      // Reset form and close modal\n      setContent(\"\");\n      setSelectedImage(null);\n      setImagePreview(null);\n      onPostCreated();\n      onClose();\n    } catch (error) {\n      console.error(\"Error creating post:\", error);\n      setError(\"Erro ao criar publicação. Tente novamente.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex items-center justify-center min-h-screen px-4\">\n        {/* Overlay */}\n        <div\n          className=\"fixed inset-0 bg-black/50 transition-opacity\"\n          onClick={onClose}\n        />\n\n        {/* Modal */}\n        <div className=\"relative bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full mx-auto shadow-xl\">\n          <div className=\"border-b border-gray-300 dark:border-gray-700 px-4 py-3 flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold dark:text-gray-200\">\n              Criar publicação\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-4\">\n            <div className=\"flex items-center space-x-3 mb-4\">\n              <img\n                src={user?.photoURL || \"/default-avatar.png\"}\n                alt={user?.displayName || \"User\"}\n                className=\"h-10 w-10 rounded-full object-cover border border-gray-200 dark:border-gray-700\"\n              />\n              <span className=\"font-semibold dark:text-gray-200\">\n                {user?.displayName || \"Usuário\"}\n              </span>\n            </div>\n\n            <textarea\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              placeholder=\"O que você está pensando?\"\n              className=\"w-full min-h-[100px] p-2 border border-gray-300 dark:border-gray-700 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400\"\n            />\n\n            {imagePreview && (\n              <div className=\"relative mt-4\">\n                <img\n                  src={imagePreview}\n                  alt=\"Preview\"\n                  className=\"max-h-[300px] rounded-lg mx-auto\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setSelectedImage(null);\n                    setImagePreview(null);\n                  }}\n                  className=\"absolute top-2 right-2 bg-gray-900/50 rounded-full p-1 hover:bg-gray-900/75\"\n                >\n                  <XMarkIcon className=\"h-5 w-5 text-white\" />\n                </button>\n              </div>\n            )}\n\n            {error && (\n              <p className=\"mt-4 text-sm text-red-600 dark:text-red-400\">\n                {error}\n              </p>\n            )}\n\n            <div className=\"mt-4 flex items-center justify-between\">\n              <button\n                type=\"button\"\n                onClick={() => fileInputRef.current?.click()}\n                className=\"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200\"\n              >\n                <PhotoIcon className=\"h-6 w-6\" />\n                <span>Adicionar foto</span>\n              </button>\n\n              <button\n                type=\"submit\"\n                disabled={loading || (!content.trim() && !selectedImage)}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? \"Publicando...\" : \"Publicar\"}\n              </button>\n            </div>\n\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              onChange={handleImageSelect}\n              accept=\"image/*\"\n              className=\"hidden\"\n            />\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/create/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport CreatePostModal from \"@/components/CreatePostModal\";\nimport { useAuth } from \"@/lib/AuthContext\";\n\nexport default function CreatePage() {\n  const { user } = useAuth();\n  const [isModalOpen, setIsModalOpen] = useState(true);\n  const router = useRouter();\n\n  if (!user) {\n    return (\n      <div className=\"container mx-auto p-8 max-w-md\">\n        <p className=\"text-center text-red-600\">Você precisa estar logado para criar uma publicação.</p>\n      </div>\n    );\n  }\n\n  const handleClose = () => {\n    setIsModalOpen(false);\n    router.back();\n  };\n\n  const handlePostCreated = () => {\n    router.push(\"/\"); // Redirect to home page after post creation\n  };\n\n  return (\n    <CreatePostModal\n      isOpen={isModalOpen}\n      onClose={handleClose}\n      onPostCreated={handlePostCreated}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,6HAAA,CAAA,UAAO,AAAD;IACvB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,IAAI,CAAC,MAAM;QACT,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAA2B;;;;;;;;;;;IAG9C;IAEA,MAAM,cAAc;QAClB,eAAe;QACf,OAAO,IAAI;IACb;IAEA,MAAM,oBAAoB;QACxB,OAAO,IAAI,CAAC,MAAM,4CAA4C;IAChE;IAEA,qBACE,6LAAC,wIAAA,CAAA,UAAe;QACd,QAAQ;QACR,SAAS;QACT,eAAe;;;;;;AAGrB;GA7BwB;;QACL,6HAAA,CAAA,UAAO;QAET,qIAAA,CAAA,YAAS;;;KAHF","debugId":null}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/node_modules/%40heroicons/react/24/outline/esm/XMarkIcon.js"],"sourcesContent":["import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 18 18 6M6 6l12 12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;"],"names":[],"mappings":";;;AAAA;;AACA,SAAS,UAAU,EACjB,KAAK,EACL,OAAO,EACP,GAAG,OACJ,EAAE,MAAM;IACP,OAAO,WAAW,GAAE,CAAA,GAAA,6JAAA,CAAA,gBAAmB,AAAD,EAAE,OAAO,OAAO,MAAM,CAAC;QAC3D,OAAO;QACP,MAAM;QACN,SAAS;QACT,aAAa;QACb,QAAQ;QACR,eAAe;QACf,aAAa;QACb,KAAK;QACL,mBAAmB;IACrB,GAAG,QAAQ,QAAQ,WAAW,GAAE,CAAA,GAAA,6JAAA,CAAA,gBAAmB,AAAD,EAAE,SAAS;QAC3D,IAAI;IACN,GAAG,SAAS,MAAM,WAAW,GAAE,CAAA,GAAA,6JAAA,CAAA,gBAAmB,AAAD,EAAE,QAAQ;QACzD,eAAe;QACf,gBAAgB;QAChB,GAAG;IACL;AACF;AACA,MAAM,aAAa,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAAE;uCACnC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/node_modules/%40heroicons/react/24/outline/esm/PhotoIcon.js"],"sourcesContent":["import * as React from \"react\";\nfunction PhotoIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PhotoIcon);\nexport default ForwardRef;"],"names":[],"mappings":";;;AAAA;;AACA,SAAS,UAAU,EACjB,KAAK,EACL,OAAO,EACP,GAAG,OACJ,EAAE,MAAM;IACP,OAAO,WAAW,GAAE,CAAA,GAAA,6JAAA,CAAA,gBAAmB,AAAD,EAAE,OAAO,OAAO,MAAM,CAAC;QAC3D,OAAO;QACP,MAAM;QACN,SAAS;QACT,aAAa;QACb,QAAQ;QACR,eAAe;QACf,aAAa;QACb,KAAK;QACL,mBAAmB;IACrB,GAAG,QAAQ,QAAQ,WAAW,GAAE,CAAA,GAAA,6JAAA,CAAA,gBAAmB,AAAD,EAAE,SAAS;QAC3D,IAAI;IACN,GAAG,SAAS,MAAM,WAAW,GAAE,CAAA,GAAA,6JAAA,CAAA,gBAAmB,AAAD,EAAE,QAAQ;QACzD,eAAe;QACf,gBAAgB;QAChB,GAAG;IACL;AACF;AACA,MAAM,aAAa,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAAE;uCACnC","ignoreList":[0],"debugId":null}}]
}