{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = 'https://your-project-url.supabase.co';\nconst supabaseKey = 'your-anon-key';\n\nexport const supabase = createClient(supabaseUrl, supabaseKey);\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,cAAc;AAEb,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/search/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { MagnifyingGlassIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\nimport { useAuth } from \"../../lib/AuthContext\";\nimport { supabase } from \"../../lib/supabase\";\n\ninterface SearchResult {\n  id: string;\n  username: string;\n  full_name: string;\n  avatar_url: string;\n  bio?: string;\n  followers_count?: number;\n  posts_count?: number;\n}\n\ninterface Tag {\n  id: string;\n  name: string;\n  posts_count: number;\n}\n\ninterface Post {\n  id: string;\n  image_url: string;\n  likes_count: number;\n  comments_count: number;\n}\n\nexport default function SearchPage() {\n  const { user } = useAuth();\n  const [searchTerm, setSearchTerm] = useState<string>(\"\");\n  const [searchType, setSearchType] = useState<\"users\" | \"tags\" | \"places\">(\"users\");\n  const [results, setResults] = useState<SearchResult[]>([]);\n  const [tagResults, setTagResults] = useState<Tag[]>([]);\n  const [topPosts, setTopPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [recentSearches, setRecentSearches] = useState<SearchResult[]>([]);\n\n  // Initialize data and handle search\n  useEffect(() => {\n    if (!user) return;\n\n    // Load initial data\n    loadRecentSearches();\n    void loadTopPosts();\n\n    // Set up search debounce\n    const timeoutId = setTimeout(() => {\n      if (searchTerm) {\n        void handleSearch();\n      } else {\n        setResults([]);\n        setTagResults([]);\n      }\n    }, 300);\n\n    return () => clearTimeout(timeoutId);\n  }, [searchTerm, searchType, user]);\n\n  const loadRecentSearches = () => {\n    const savedSearches = localStorage.getItem(\"recentSearches\");\n    if (savedSearches) {\n      setRecentSearches(JSON.parse(savedSearches));\n    }\n  };\n\n  const loadTopPosts = async () => {\n    try {\n      const { data: posts, error } = await supabase\n        .from('posts')\n        .select('id, image_url, likes_count, comments_count')\n        .order('likes_count', { ascending: false })\n        .limit(9);\n\n      if (error) {\n        console.error(\"Error loading top posts:\", error.message || error);\n        return;\n      }\n      if (posts) setTopPosts(posts);\n    } catch (error) {\n      console.error(\"Error loading top posts:\", error);\n    }\n  };\n\n  const handleSearch = async (): Promise<void> => {\n    if (!searchTerm.trim()) return;\n\n    setLoading(true);\n    try {\n      if (searchType === \"users\") {\n        const { data: users, error } = await supabase\n          .from('profiles')\n          .select('*')\n          .or(`username.ilike.%${searchTerm}%,full_name.ilike.%${searchTerm}%`)\n          .limit(20);\n\n        if (error) throw error;\n        setResults(users || []);\n\n      } else if (searchType === \"tags\") {\n        const { data: tags, error } = await supabase\n          .from('tags')\n          .select('*')\n          .ilike('name', `%${searchTerm}%`)\n          .limit(20);\n\n        if (error) throw error;\n        setTagResults(tags || []);\n      }\n    } catch (error) {\n      console.error(\"Search error:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addToRecentSearches = (result: SearchResult) => {\n    const newRecentSearches = [\n      result,\n      ...recentSearches.filter(s => s.id !== result.id)\n    ].slice(0, 5);\n    \n    setRecentSearches(newRecentSearches);\n    localStorage.setItem(\"recentSearches\", JSON.stringify(newRecentSearches));\n  };\n\n  const removeFromRecent = (id: string) => {\n    const newRecentSearches = recentSearches.filter(s => s.id !== id);\n    setRecentSearches(newRecentSearches);\n    localStorage.setItem(\"recentSearches\", JSON.stringify(newRecentSearches));\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-4\">\n      {/* Search Header */}\n      <div className=\"mb-6\">\n        <div className=\"relative\">\n          <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 dark:text-gray-500\" />\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            placeholder=\"Pesquisar\"\n            className=\"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-gray-200\"\n          />\n          {searchTerm && (\n            <button\n              onClick={() => setSearchTerm(\"\")}\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2\"\n            >\n              <XMarkIcon className=\"h-5 w-5 text-gray-400 dark:text-gray-500\" />\n            </button>\n          )}\n        </div>\n\n        {/* Search Type Tabs */}\n        <div className=\"flex space-x-6 mt-4 border-b border-gray-200 dark:border-gray-700\">\n          {[\"users\", \"tags\", \"places\"].map((type) => (\n            <button\n              key={type}\n              onClick={() => setSearchType(type as \"users\" | \"tags\" | \"places\")}\n              className={`pb-3 px-1 text-sm font-medium ${\n                searchType === type\n                  ? \"border-b-2 border-gray-900 dark:border-white text-gray-900 dark:text-white\"\n                  : \"text-gray-500 dark:text-gray-400\"\n              }`}\n            >\n              {type.charAt(0).toUpperCase() + type.slice(1)}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Search Results or Recent Searches */}\n      {loading ? (\n        <div className=\"flex justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n        </div>\n      ) : searchTerm ? (\n        <div className=\"space-y-4\">\n          {searchType === \"users\" && results.map((result) => (\n            <div\n              key={result.id}\n              onClick={() => addToRecentSearches(result)}\n              className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg cursor-pointer transition\"\n            >\n              <div className=\"flex items-center\">\n                <img\n                  src={result.avatar_url || \"/default-avatar.png\"}\n                  alt={result.username}\n                  className=\"w-12 h-12 rounded-full object-cover\"\n                />\n                <div className=\"ml-3\">\n                  <p className=\"font-semibold dark:text-gray-200\">{result.username}</p>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">{result.full_name}</p>\n                  {result.followers_count !== undefined && (\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      {result.followers_count.toLocaleString()} seguidores\n                    </p>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n\n          {searchType === \"tags\" && tagResults.map((tag) => (\n            <div\n              key={tag.id}\n              className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg cursor-pointer transition\"\n            >\n              <div className=\"flex items-center\">\n                <div className=\"w-12 h-12 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center\">\n                  <span className=\"text-lg text-gray-500 dark:text-gray-400\">#</span>\n                </div>\n                <div className=\"ml-3\">\n                  <p className=\"font-semibold dark:text-gray-200\">#{tag.name}</p>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {tag.posts_count.toLocaleString()} publicações\n                  </p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <>\n          {/* Recent Searches */}\n          {recentSearches.length > 0 && (\n            <div className=\"mb-8\">\n              <h2 className=\"text-base font-semibold mb-4 dark:text-gray-200\">Pesquisas recentes</h2>\n              <div className=\"space-y-4\">\n                {recentSearches.map((search) => (\n                  <div\n                    key={search.id}\n                    className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg\"\n                  >\n                    <div className=\"flex items-center cursor-pointer\">\n                      <img\n                        src={search.avatar_url || \"/default-avatar.png\"}\n                        alt={search.username}\n                        className=\"w-12 h-12 rounded-full object-cover\"\n                      />\n                      <div className=\"ml-3\">\n                        <p className=\"font-semibold dark:text-gray-200\">{search.username}</p>\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">{search.full_name}</p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        removeFromRecent(search.id);\n                      }}\n                      className=\"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Top Posts Grid */}\n          <div>\n            <h2 className=\"text-base font-semibold mb-4 dark:text-gray-200\">Populares</h2>\n            <div className=\"grid grid-cols-3 gap-1\">\n              {topPosts.map((post) => (\n                <div key={post.id} className=\"aspect-square relative group cursor-pointer\">\n                  <img\n                    src={post.image_url}\n                    alt=\"\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center space-x-4\">\n                    <div className=\"hidden group-hover:flex items-center text-white\">\n                      <span className=\"font-semibold\">{post.likes_count}</span>\n                      <span className=\"mx-1\">•</span>\n                      <span className=\"font-semibold\">{post.comments_count}</span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}